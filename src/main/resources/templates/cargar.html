<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Cargar Almacén de Datos</title>
</head>
<body>
<h1>Carga del almacén de datos</h1>

<form th:action="@{/almacen/cargar}" method="post">
    <label><input type="checkbox" id="seleccionarTodo" onclick="toggleCheckboxes(this)"> Seleccionar todas</label><br>
    <label><input type="checkbox" class="fuenteCheckbox" name="fuente" value="Castilla y León"> Castilla y León</label><br>
    <label><input type="checkbox" class="fuenteCheckbox" name="fuente" value="Comunitat Valenciana"> Comunitat Valenciana</label><br>
    <label><input type="checkbox" class="fuenteCheckbox" name="fuente" value="Euskadi"> Euskadi</label><br>

    <button type="submit">Cargar</button>
    <button type="reset">Cancelar</button>
</form>

<h2>Resultados de la carga:</h2>
<p th:if="${error}" th:text="${error}" style="color: red;"></p>
<p>Número de registros cargados correctamente: <span th:text="${cargadosCorrectos}">0</span></p>
<h3>Registros con errores y reparados:</h3>
<ul>
    <li th:each="error : ${erroresReparados}" th:text="${error}"></li>
</ul>
<h3>Registros con errores y rechazados:</h3>
<ul>
    <li th:each="error : ${erroresRechazados}" th:text="${error}"></li>
</ul>

<script>
    function toggleCheckboxes(source) {
        const checkboxes = document.querySelectorAll('.fuenteCheckbox');
        checkboxes.forEach(checkbox => checkbox.checked = source.checked);
    }
</script>
</body>
</html>
